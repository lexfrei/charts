# Production configuration example for cloudflare-tunnel
# This example shows a production setup with high availability

replicaCount: 3

cloudflare:
  account: "your-account-id"
  tunnelName: "production-tunnel"
  tunnelId: "your-tunnel-id"
  secret: "your-tunnel-secret"
  protocol: "quic"
  postQuantum: true
  retries: 5
  gracePeriod: "60s"
  tags:
    environment: production
    team: platform
  ingress:
    - hostname: api.example.com
      service: http://api-service:8080
    - hostname: web.example.com
      service: http://web-service:80

resources:
  limits:
    cpu: 200m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 128Mi

podDisruptionBudget:
  enabled: true
  minAvailable: 2

topologySpreadConstraints:
  - maxSkew: 1
    topologyKey: topology.kubernetes.io/zone
    whenUnsatisfiable: DoNotSchedule
    labelSelector:
      matchLabels:
        app.kubernetes.io/name: cloudflare-tunnel

affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchLabels:
              app.kubernetes.io/name: cloudflare-tunnel
          topologyKey: kubernetes.io/hostname

serviceMonitor:
  enabled: true
  interval: 30s

networkPolicy:
  enabled: true
